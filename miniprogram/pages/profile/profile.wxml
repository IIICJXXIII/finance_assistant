<!--
  ä¸ªäººä¸­å¿ƒé¡µé¢
  å¯¹åº”åŸ Vue é¡¹ç›®çš„ UserProfile.vue
-->
<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header">
    <view class="user-avatar">
      <text class="avatar-text">{{userInfo.nickname ? userInfo.nickname[0] : 'U'}}</text>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.nickname || userInfo.username || 'æœªç™»å½•'}}</text>
      <view class="user-role tag {{userInfo.role === 'admin' ? 'tag-warning' : 'tag-info'}}">
        <text>{{userInfo.role === 'admin' ? 'ç®¡ç†å‘˜' : 'æ™®é€šç”¨æˆ·'}}</text>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-row">
    <view class="stat-item">
      <text class="stat-value">{{stats.totalCount}}</text>
      <text class="stat-label">å½’æ¡£ç¥¨æ®</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">Â¥{{stats.totalAmount}}</text>
      <text class="stat-label">ç´¯è®¡é‡‘é¢</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{stats.monthCount}}</text>
      <text class="stat-label">æœ¬æœˆå½’æ¡£</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="card menu-card">
      <view class="menu-item" bindtap="goToBudget">
        <view class="menu-left">
          <text class="menu-icon">ğŸ’°</text>
          <text class="menu-text">é¢„ç®—ç®¡ç†</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
      
      <view class="menu-item" bindtap="goToCalendar">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“…</text>
          <text class="menu-text">è´¢åŠ¡æ—¥å†</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
      
      <view class="menu-item" bindtap="goToRecycle">
        <view class="menu-left">
          <text class="menu-icon">ğŸ—‘ï¸</text>
          <text class="menu-text">å›æ”¶ç«™</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="goToApproval" wx:if="{{userInfo.role === 'admin'}}">
        <view class="menu-left">
          <text class="menu-icon">âœ…</text>
          <text class="menu-text">å®¡æ‰¹å·¥ä½œå°</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>

    <view class="card menu-card">
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-left">
          <text class="menu-icon">âš™ï¸</text>
          <text class="menu-text">ç³»ç»Ÿè®¾ç½®</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
      
      <view class="menu-item" bindtap="goToAnalysis">
        <view class="menu-left">
          <text class="menu-icon">ğŸ¤–</text>
          <text class="menu-text">AI èšç±»åˆ†æ</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="showAbout">
        <view class="menu-left">
          <text class="menu-icon">â„¹ï¸</text>
          <text class="menu-text">å…³äº</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="btn btn-danger logout-btn" bindtap="handleLogout">
      é€€å‡ºç™»å½•
    </button>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text>SmartDoc v1.0.0</text>
  </view>
</view>
