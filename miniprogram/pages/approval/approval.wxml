<!--
  å®¡æ‰¹å·¥ä½œå°é¡µé¢
-->
<view class="approval-container">
  <view class="tabs">
    <view 
      class="tab-item {{currentTab === 'pending' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="pending"
    >
      å¾…å®¡æ‰¹
      <view class="badge" wx:if="{{pendingCount > 0}}">{{pendingCount}}</view>
    </view>
    <view 
      class="tab-item {{currentTab === 'approved' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="approved"
    >
      å·²å®¡æ‰¹
    </view>
  </view>

  <scroll-view class="list-scroll" scroll-y>
    <view wx:if="{{list.length > 0}}">
      <view 
        class="card list-item"
        wx:for="{{list}}"
        wx:key="id"
      >
        <view class="item-header">
          <text class="merchant-name ellipsis">{{item.merchantName}}</text>
          <text class="amount">Â¥{{item.amountStr}}</text>
        </view>
        <view class="item-info">
          <text class="info-text">{{item.itemName || '-'}}</text>
          <text class="info-date">{{item.date}}</text>
        </view>
        <view class="item-meta">
          <view class="tag tag-info">
            <text>{{item.category}}</text>
          </view>
          <text class="submitter">æäº¤äºº: {{item.username || '-'}}</text>
        </view>
        
        <view class="item-actions" wx:if="{{currentTab === 'pending'}}">
          <button class="action-btn reject" bindtap="handleReject" data-item="{{item}}">é©³å›</button>
          <button class="action-btn approve" bindtap="handleApprove" data-item="{{item}}">é€šè¿‡</button>
        </view>
        
        <view class="item-result" wx:else>
          <view class="tag {{item.status === 2 ? 'tag-success' : 'tag-danger'}}">
            <text>{{item.status === 2 ? 'å·²é€šè¿‡' : 'å·²é©³å›'}}</text>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— {{currentTab === 'pending' ? 'å¾…å®¡æ‰¹' : 'å·²å®¡æ‰¹'}}è®°å½•</text>
    </view>
  </scroll-view>
</view>
