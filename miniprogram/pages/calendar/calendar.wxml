<!--
  è´¢åŠ¡æ—¥åŽ†é¡µé¢
-->
<view class="calendar-container">
  <!-- æœˆä»½é€‰æ‹© -->
  <view class="month-nav">
    <text class="nav-btn" bindtap="prevMonth">â€¹</text>
    <text class="month-text">{{currentYear}}å¹´{{currentMonth}}æœˆ</text>
    <text class="nav-btn" bindtap="nextMonth">â€º</text>
  </view>

  <!-- æ—¥åŽ†ç½‘æ ¼ -->
  <view class="calendar-grid">
    <view class="weekday-row">
      <text class="weekday" wx:for="{{weekdays}}" wx:key="*this">{{item}}</text>
    </view>
    <view class="days-grid">
      <view 
        class="day-cell {{day.isCurrentMonth ? '' : 'other-month'}} {{day.isToday ? 'today' : ''}} {{day.hasData ? 'has-data' : ''}}"
        wx:for="{{days}}"
        wx:key="date"
        bindtap="selectDate"
        data-date="{{day.date}}"
      >
        <text class="day-num">{{day.day}}</text>
        <view class="day-dot" wx:if="{{day.hasData}}"></view>
      </view>
    </view>
  </view>

  <!-- å½“æ—¥æ”¯å‡º -->
  <view class="card detail-card">
    <view class="card-header">
      <text class="card-title">ðŸ“… {{selectedDate}} æ”¯å‡º</text>
      <text class="total-amount">Â¥{{dayTotal}}</text>
    </view>

    <view class="expense-list" wx:if="{{dayExpenses.length > 0}}">
      <view class="expense-item" wx:for="{{dayExpenses}}" wx:key="id">
        <view class="expense-left">
          <text class="expense-icon">{{item.icon}}</text>
          <view class="expense-info">
            <text class="expense-name ellipsis">{{item.merchantName}}</text>
            <text class="expense-category">{{item.category}}</text>
          </view>
        </view>
        <text class="expense-amount">-Â¥{{item.amountStr}}</text>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-text">å½“æ—¥æš‚æ— æ”¯å‡ºè®°å½•</text>
    </view>
  </view>
</view>
